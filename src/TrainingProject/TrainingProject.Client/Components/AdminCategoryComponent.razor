@inject HttpClient HttpClient

<EditForm Model="categoryModel" OnValidSubmit="CreateCategory">
    <DataAnnotationsValidator />
    <ValidationSummary />

    <div class="form-group row">
        <InputText name="name" placeholder="Category Name" @bind-Value="categoryModel.CategoryName"></InputText>
        <label for="name">Category name</label>
    </div>
    <div class="form-group row">
        <InputTextArea name="description" placeholder="Category Description (Optional)" @bind-Value="categoryModel.CategoryDescription"></InputTextArea>
        <label for="description">Category description</label>
    </div>

    <button class="form-group row btn btn-primary" type="submit">Submit</button>
</EditForm>

@code {
    protected bool ErrorOccured { get; set; } = false;

    public CreateCategoryDTO categoryModel { get; set; } = new CreateCategoryDTO();

    public async Task CreateCategory()
    {
        var response = await HttpClient.PostJsonAsync("api/Admin/category/create", categoryModel);

        try
        {
            response.EnsureSuccessStatusCode();
        }
        catch (HttpRequestException ex)
        {
            ErrorOccured = true;
            return;
        }

    }
}
